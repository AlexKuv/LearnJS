(()=>{"use strict";(e=>{let t,o=document.querySelector("#timer-hours"),l=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),n=function(){let e=function(){let e=(new Date("25 november 2020").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();o.textContent=("0"+e.hours.toString()).slice(-2),l.textContent=("0"+e.minutes.toString()).slice(-2),c.textContent=("0"+e.seconds.toString()).slice(-2),e.seconds<0&&(clearInterval(t),o.textContent="00",l.textContent="00",c.textContent="00")};n(),t=setInterval(n,1e3)})(),(()=>{const e=document.querySelector("menu"),t=(document.querySelector(".menu"),()=>{e.classList.toggle("active-menu")});document.addEventListener("click",(o=>{let l=o.target;l.closest(".menu")||l.classList.contains("close-btn")?t():l.closest("menu")?l.closest("menu>ul>li>a")&&t():e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let l=document.getElementById("form3").querySelectorAll("input");t.forEach((t=>{let l;t.addEventListener("click",(()=>{let t=0;screen.width>768?l=setInterval((()=>{e.style.display="block",t++,t<20?o.style.top=8*t+"px":clearInterval(l)}),1):e.style.display="block"}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?(l.forEach((e=>e.value="")),e.style.display="none"):(o=o.closest(".popup-content"),o||(l.forEach((e=>e.value="")),e.style.display="none"))}))})(),(()=>{const e=document.querySelector("#service-block"),t=document.querySelector("a");document.querySelector("menu").querySelectorAll("ul>li>a").forEach((e=>{let t=e.getAttribute("href");e.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(`${t}`).scrollIntoView({behavior:"smooth",block:"start"})}))})),t.addEventListener("click",(t=>{t.preventDefault(),e.scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l&&t.forEach(((e,c)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(t[l].classList.add("active"),o[l].classList.remove("d-none")):(t[l].classList.remove("active"),o[l].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-content"));let o,l=0;(()=>{let o=document.createElement("ul"),c=document.createElement("li");o.className="portfolio-dots",t.appendChild(o),c.className="dot";for(let t=0;t<e.length;t++)o.appendChild(c.cloneNode());o.querySelectorAll(".dot")[l].classList.add("dot-active")})();const c=(e,t,o)=>{e[t].classList.remove(o)},n=(e,t,o)=>{e[t].classList.add(o)},r=()=>{let t=document.querySelectorAll(".dot");c(e,l,"portfolio-item-active"),c(t,l,"dot-active"),l++,l>=e.length&&(l=0),n(e,l,"portfolio-item-active"),n(t,l,"dot-active")},a=(e=3e3)=>{o=setInterval(r,e)};t.addEventListener("click",(t=>{t.preventDefault();let o=t.target,r=document.querySelectorAll(".dot");o.matches(".portfolio-btn, .dot")&&(c(e,l,"portfolio-item-active"),c(r,l,"dot-active"),o.matches("#arrow-right")?l++:o.matches("#arrow-left")?l--:o.matches(".dot")&&r.forEach(((e,t)=>{e===o&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),n(e,l,"portfolio-item-active"),n(r,l,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&a()})),a()})(),document.getElementById("command").querySelectorAll(".command__photo").forEach((e=>{let t=e.src;e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=t}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),n=document.querySelector(".calc-count");let r=document.getElementById("total");document.querySelectorAll(".calc-block>input").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^0-9]/g,"")}))})),t.addEventListener("change",(a=>{const s=a.target;(s.matches("select")||s.matches("input"))&&(()=>{let a=0,s=1,u=1;const i=o.options[o.selectedIndex].value,d=+l.value;n.value>1&&(s+=(n.value-1)/10),c.value&&c.value<5?u*=2:c.value&&c.value<10&&(u*=1.5),i&&d&&(a=e*i*d*s*u),""===l.value&&(r.textContent=0);let m,v=0;m=setInterval((()=>{v<a&&a<1500?(v+=50,r.textContent=v):v<a&&a<15e3?(v+=250,r.textContent=v):v<a&&a>15e3?(v+=750,r.textContent=v):v>a&&(clearInterval(m),r.textContent=Math.floor(a)),o.addEventListener("input",(()=>{r.textContent=0}))}),5),t.addEventListener("change",(e=>{const t=e.target;(t.matches("select")||t.matches("input"))&&(a=0)}))})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="\n  font-size: 2rem;\n  color: #fff;\n  ",e.forEach((e=>{let o=e.querySelectorAll(".form-btn");e.querySelectorAll("input").forEach((t=>{let l=/^\+?[78]([-()]*\d){10}$/,c=/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i;t.addEventListener("input",(n=>{if(t.matches(".form-phone")){let n=e.querySelector(".form-email");t.value=t.value.replace(/[^+0-9()-]/,""),console.log(c.test(n.value)),c.test(n.value)?c.test(n.value)&&(o[0].disabled=!l.test(t.value)):o[0].disabled=!0}if(t.matches('[placeholder="Ваше имя"]')&&(t.value=t.value.replace(/[^а-яА-Я]/,"")),t.matches("#form2-message")&&(t.value=t.value.replace(/[^а-яА-Я\s\,\.\?\!\-\;\:]/,"")),t.matches(".form-email")){let n=e.querySelector(".form-phone");l.test(n.value)?l.test(n.value)&&(o[0].disabled=!c.test(t.value)):o[0].disabled=!0}}))})),e.addEventListener("submit",(o=>{o.preventDefault(),e.appendChild(t),t.classList.add("sk-plane");const l=new FormData(e);let c={};l.forEach(((e,t)=>{c[t]=e})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((o=>{200===o.status?(t.classList.remove("sk-plane"),t.textContent="Спасибо! Мы скоро с вами свяжемся!",e.querySelectorAll("input").forEach((e=>e.value=""))):(t.classList.remove("sk-plane"),t.textContent="Что-то пошло не так...",e.querySelectorAll("input").forEach((e=>e.value="")),console.error(o.status))})).catch((e=>{console.error(e)})),t.textContent="",setTimeout((()=>{e.removeChild(t)}),5e3);const n=document.querySelector(".popup");setTimeout((()=>{n.style.display="none"}),5e3)}))}))})()})();